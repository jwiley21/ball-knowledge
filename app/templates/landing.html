{% extends 'base.html' %}
{% block title %}Game Modes Â· {{ APP_NAME or "Ball Knowledge" }}{% endblock %}

{% block content %}
<div class="mx-auto max-w-screen-sm px-3 pt-4 pb-[max(4rem,env(safe-area-inset-bottom))]">

  <!-- Username card -->
  <section class="mb-6">
    <div class="bg-slate-800 border border-slate-700 rounded-xl shadow-lg p-5">
      {% if not username %}
        <h2 class="text-lg font-semibold text-slate-100 mb-3">Choose a username</h2>
        <form method="post" action="{{ url_for('main.landing') }}" class="flex flex-col sm:flex-row gap-2 sm:gap-3">
          <input
            type="text"
            name="username"
            required
            placeholder="e.g. Nick Chubb or Mgarret"
            autocapitalize="words"
            autocomplete="nickname"
            inputmode="text"
            class="w-full sm:flex-1 rounded-lg border border-slate-600 bg-slate-700 px-3 py-3 text-base text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
          />
          <button
            type="submit"
            class="w-full sm:w-auto inline-flex items-center justify-center rounded-lg bg-indigo-600 px-4 py-3 font-medium text-white shadow hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-indigo-500"
          >
            Save
          </button>
        </form>
        <p class="text-xs text-slate-400 mt-2">Usernames are case-insensitive and locked to this browser.</p>
      {% else %}
        <div class="flex flex-wrap items-center gap-3">
          <span class="inline-flex items-center gap-2 rounded-full bg-indigo-900/40 text-indigo-200 px-3 py-1 text-sm border border-indigo-800/40">
            <svg viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4"><path d="M10 2a8 8 0 100 16 8 8 0 000-16Zm1 11H9V9h2v4Zm0-6H9V5h2v2Z"/></svg>
            {{ username }}
          </span>
          {% if username_locked %}
            <span class="text-xs text-slate-400">Locked to this browser.</span>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </section>

  <!-- Modes card -->
  <section>
    <div class="bg-slate-800 border border-slate-700 rounded-xl shadow-lg p-5">
      <h3 class="font-semibold text-slate-100 mb-3">Pick a mode</h3>

      <div class="grid gap-3">
        <!-- Daily -->
        <form method="get" action="{{ url_for('main.play') }}">
          <button
            type="submit"
            {% if not username %}disabled{% endif %}
            class="w-full inline-flex items-center justify-between rounded-lg px-4 py-3 font-medium shadow
                   {% if username %}
                     bg-indigo-600 text-white hover:bg-indigo-500
                   {% else %}
                     bg-slate-700 text-slate-400 cursor-not-allowed
                   {% endif %}"
          >
            <span>Daily Game</span>
            <span class="text-xs opacity-90">One try per day</span>
          </button>
        </form>

        <!-- Practice -->
        <form method="get" action="{{ url_for('main.practice') }}">
          <button
            type="submit"
            {% if not username %}disabled{% endif %}
            class="w-full inline-flex items-center justify-between rounded-lg px-4 py-3 font-medium shadow
                   {% if username %}
                     bg-indigo-600 text-white hover:bg-indigo-500
                   {% else %}
                     bg-slate-700 text-slate-400 cursor-not-allowed
                   {% endif %}"
          >
            <span>Practice</span>
            <span class="text-xs opacity-90">Unlimited plays</span>
          </button>
        </form>

        <!-- Timed -->
        <form method="get" action="{{ url_for('main.timed') }}">
          <button
            type="submit"
            {% if not username %}disabled{% endif %}
            class="w-full inline-flex items-center justify-between rounded-lg px-4 py-3 font-medium shadow
                   {% if username %}
                     bg-indigo-600 text-white hover:bg-indigo-500
                   {% else %}
                     bg-slate-700 text-slate-400 cursor-not-allowed
                   {% endif %}"
          >
            <span>Timed (2:00)</span>
            <span class="text-xs opacity-90">Rack up points</span>
          </button>
        </form>
      </div>

      {% if not username %}
        <p class="text-xs text-slate-400 mt-3">Create a username above to start playing.</p>
      {% endif %}
    </div>
  </section>

</div>
{% endblock %}
