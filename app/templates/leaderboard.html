{% extends 'base.html' %}
{% block title %}Leaderboard Â· {{ APP_NAME or "Ball Knowledge" }}{% endblock %}

{% block content %}
<div class="mx-auto max-w-screen-sm px-3 pt-4">

  <section class="mb-6">
    <div class="bg-slate-800 border border-slate-700 rounded-xl shadow-lg p-5">
      <h2 class="text-xl font-semibold text-slate-100">Todayâ€™s Leaderboard</h2>
      {% if today_label %}
        <p class="text-slate-400 text-sm mt-1">Game date: <span class="font-mono">{{ today_label }}</span></p>
      {% endif %}

      {% if rows and rows|length > 0 %}
        <div class="mt-4 overflow-hidden rounded-lg border border-slate-700">
          <table class="min-w-full divide-y divide-slate-700">
            <thead class="bg-slate-900/40">
              <tr class="text-left text-slate-300 text-sm">
                <th class="px-4 py-2 w-10">#</th>
                <th class="px-4 py-2">User</th>
                <th class="px-4 py-2 text-right">Score</th>
                <th class="px-4 py-2 text-right">Streak</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-slate-700">
              {% for r in rows %}
                {% set streak = r.streak|default(0) %}
                <tr class="text-slate-200">
                  <td class="px-4 py-2">{{ loop.index }}</td>
                  <td class="px-4 py-2">
                    <span class="truncate">{{ r.username }}</span>
                  </td>
                  <td class="px-4 py-2 text-right font-semibold">{{ r.score }}</td>
                  <td class="px-4 py-2 text-right">
                    {% if streak >= 3 %}
                      <span title="On fire!" class="inline-flex items-center gap-1 font-semibold text-amber-300">
                        ðŸ”¥ {{ streak }}
                      </span>
                    {% elif streak > 0 %}
                      <span class="text-slate-300 font-medium">{{ streak }}</span>
                    {% else %}
                      <span class="text-slate-500">â€”</span>
                    {% endif %}
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% else %}
        <p class="text-slate-400 mt-3">No results yet for today.</p>
      {% endif %}
    </div>
  </section>

</div>
{% endblock %}
